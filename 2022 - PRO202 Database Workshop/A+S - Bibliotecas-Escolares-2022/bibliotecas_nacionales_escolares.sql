/*
MIT License

Copyright (c) 2022 Ruth Morales, Karen Contreras, Patricio Muñoz, Esteban Cuevas

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE bibliotecas_nacionales_escolares;
USE bibliotecas_nacionales_escolares;

DROP TABLE IF EXISTS `Asignatura`;
CREATE TABLE `Asignatura` (
  `id_asignatura` int NOT NULL AUTO_INCREMENT,
  `nombre` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  PRIMARY KEY (`id_asignatura`),
  UNIQUE KEY `nombre_UNIQUE` (`nombre`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

DROP TABLE IF EXISTS `Autor`;
CREATE TABLE `Autor` (
  `id_autor` bigint unsigned NOT NULL AUTO_INCREMENT,
  `nombre` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `apellido` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL,
  `ano_nacimiento` int NULL,
  `ano_fallecimiento` int DEFAULT NULL,
  `nacionalidad` char(2) COLLATE utf8mb4_general_ci NOT NULL,
  PRIMARY KEY (`id_autor`),
  KEY `nacionalidad` (`nacionalidad`),
  CONSTRAINT `autor_ibfk_1` FOREIGN KEY (`nacionalidad`) REFERENCES `Pais` (`iso`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

DROP TABLE IF EXISTS `Biblioteca`;
CREATE TABLE `Biblioteca` (
  `id_biblioteca` bigint unsigned NOT NULL AUTO_INCREMENT,
  `id_establecimiento` bigint unsigned NOT NULL,
  `direccion` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `id_region` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `id_ciudad` int DEFAULT NULL,
  `id_encargado` bigint unsigned DEFAULT NULL,
  `nombre_biblioteca` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  PRIMARY KEY (`id_biblioteca`),
  KEY `id_establecimiento` (`id_establecimiento`),
  CONSTRAINT `biblioteca_ibfk_1` FOREIGN KEY (`id_establecimiento`) REFERENCES `Establecimiento` (`id_establecimiento`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

DROP TABLE IF EXISTS `Categoria`;
CREATE TABLE `Categoria` (
  `id_categoria` int unsigned NOT NULL AUTO_INCREMENT,
  `nombre` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  PRIMARY KEY (`id_categoria`),
  UNIQUE KEY `nombre_UNIQUE` (`nombre`)
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

DROP TABLE IF EXISTS `Ciudad`;
CREATE TABLE `Ciudad` (
  `id_ciudad` int NOT NULL AUTO_INCREMENT,
  `id_region` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `nombre` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  PRIMARY KEY (`id_ciudad`),
  UNIQUE KEY `nombre_UNIQUE` (`nombre`),
  KEY `fk_ciudad_region_idx` (`id_region`),
  CONSTRAINT `ciudad_ibfk_1` FOREIGN KEY (`id_region`) REFERENCES `Region` (`id_region`)
) ENGINE=InnoDB AUTO_INCREMENT=256 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

DROP TABLE IF EXISTS `Establecimiento`;
CREATE TABLE `Establecimiento` (
  `id_establecimiento` bigint unsigned NOT NULL AUTO_INCREMENT,
  `nombre` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `direccion` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `id_region` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `id_encargado` bigint DEFAULT NULL,
  `id_ciudad` int NOT NULL,
  `tipo_establecimiento` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  PRIMARY KEY (`id_establecimiento`),
  KEY `id_region` (`id_region`),
  CONSTRAINT `establecimiento_ibfk_1` FOREIGN KEY (`id_region`) REFERENCES `Region` (`id_region`),
  CONSTRAINT `establecimiento_tipo1` CHECK ((`tipo_establecimiento` in (_utf8mb4'publico',_utf8mb4'particular subvencionado',_utf8mb4'privado')))
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

DROP TABLE IF EXISTS `Inventario`;
CREATE TABLE `Inventario` (
  `id_inventario` bigint unsigned NOT NULL AUTO_INCREMENT,
  `id_biblioteca` bigint unsigned NOT NULL,
  `id_material` bigint unsigned NOT NULL,
  `stock` int unsigned NOT NULL,
  `habilitado` tinyint(1) NOT NULL DEFAULT '1',
  `id_tags` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `estado` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  PRIMARY KEY (`id_inventario`),
  KEY `id_biblioteca` (`id_biblioteca`),
  KEY `id_material` (`id_material`),
  CONSTRAINT `inventario_ibfk_1` FOREIGN KEY (`id_biblioteca`) REFERENCES `Biblioteca` (`id_biblioteca`),
  CONSTRAINT `inventario_ibfk_2` FOREIGN KEY (`id_material`) REFERENCES `Material_Educativo` (`id_material`),
  CONSTRAINT `inventario_estado` CHECK ((`estado` in (_utf8mb4'disponible',_utf8mb4'prestamo',_utf8mb4'daño', _utf8mb4'perdido')))
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

DROP TABLE IF EXISTS `Material_Educativo`;
CREATE TABLE `Material_Educativo` (
  `id_material` bigint unsigned NOT NULL AUTO_INCREMENT,
  `sku` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `nombre` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `id_autor` bigint unsigned NOT NULL,
  `id_categoria` int unsigned NOT NULL,
  `tipo_material` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `habilitado` tinyint(1) NOT NULL DEFAULT '1',
  `ano_publicacion` int NOT NULL,
  `edicion` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `id_asignatura` int NOT NULL,
  PRIMARY KEY (`id_material`),
  UNIQUE KEY `sku_UNIQUE` (`sku`),
  KEY `id_autor` (`id_autor`),
  KEY `id_categoria` (`id_categoria`),
  KEY `id_asignatura` (`id_asignatura`),
  CONSTRAINT `material_educativo_ibfk_1` FOREIGN KEY (`id_autor`) REFERENCES `Autor` (`id_autor`),
  CONSTRAINT `material_educativo_ibfk_2` FOREIGN KEY (`id_categoria`) REFERENCES `Categoria` (`id_categoria`),
  CONSTRAINT `material_educativo_ibfk_3` FOREIGN KEY (`id_asignatura`) REFERENCES `Asignatura` (`id_asignatura`),
  CONSTRAINT `tipo_material` CHECK ((`tipo_material` in (_utf8mb4'fisico',_utf8mb4'digital')))
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

DROP TABLE IF EXISTS `Movimiento`;
CREATE TABLE `Movimiento` (
  `id_movimiento` bigint unsigned NOT NULL AUTO_INCREMENT,
  `id_material` bigint unsigned NOT NULL,
  `id_inventario` bigint unsigned NOT NULL,
  `id_biblioteca` bigint unsigned NOT NULL,
  `id_usuario_prestamo` bigint unsigned NOT NULL,
  `id_usuario_gestion` bigint unsigned NOT NULL,
  `fecha_salida` datetime NOT NULL ON UPDATE CURRENT_TIMESTAMP,
  `fecha_retorno` datetime DEFAULT NULL,
  `estado` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  PRIMARY KEY (`id_movimiento`),
  KEY `id_material` (`id_material`),
  KEY `id_inventario` (`id_inventario`),
  KEY `id_biblioteca` (`id_biblioteca`),
  KEY `id_usuario_prestamo` (`id_usuario_prestamo`),
  KEY `id_usuario_gestion` (`id_usuario_gestion`),
  CONSTRAINT `movimiento_ibfk_1` FOREIGN KEY (`id_material`) REFERENCES `Material_Educativo` (`id_material`),
  CONSTRAINT `movimiento_ibfk_2` FOREIGN KEY (`id_inventario`) REFERENCES `Inventario` (`id_inventario`),
  CONSTRAINT `movimiento_ibfk_3` FOREIGN KEY (`id_biblioteca`) REFERENCES `Biblioteca` (`id_biblioteca`),
  CONSTRAINT `movimiento_ibfk_4` FOREIGN KEY (`id_usuario_prestamo`) REFERENCES `Usuario` (`id_usuario`),
  CONSTRAINT `movimiento_ibfk_5` FOREIGN KEY (`id_usuario_gestion`) REFERENCES `Usuario` (`id_usuario`),
  CONSTRAINT `movimiento_estado` CHECK ((`estado` in (_utf8mb4'prestamo',_utf8mb4'devuelto',_utf8mb4'perdida')))
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

DROP TABLE IF EXISTS `Pais`;
CREATE TABLE `Pais` (
  `id_pais` int unsigned NOT NULL AUTO_INCREMENT,
  `iso` char(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `nombre` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  PRIMARY KEY (`id_pais`),
  UNIQUE KEY `iso_UNIQUE` (`iso`),
  UNIQUE KEY `nombre_UNIQUE` (`nombre`),
  KEY `ISO` (`iso`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=241 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

DROP TABLE IF EXISTS `Region`;
CREATE TABLE `Region` (
  `id_region` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `nombre` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  PRIMARY KEY (`id_region`),
  UNIQUE KEY `nombre_UNIQUE` (`nombre`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

DROP TABLE IF EXISTS `Rol`;
CREATE TABLE `Rol` (
  `id_rol` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `nombre` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `capacidades` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  PRIMARY KEY (`id_rol`),
  CONSTRAINT `rol_ids` CHECK ((`id_rol` in (_utf8mb4'admin',_utf8mb4'alumno',_utf8mb4'docente', _utf8mb4'encargado')))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

DROP TABLE IF EXISTS `Tag`;
CREATE TABLE `Tag` (
  `id_tag` bigint unsigned NOT NULL AUTO_INCREMENT,
  `slug` varchar(255) COLLATE utf8mb4_general_ci NOT NULL,
  `nombre` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  PRIMARY KEY (`id_tag`),
  UNIQUE KEY `nombre_UNIQUE` (`nombre`),
  UNIQUE KEY `slug_UNIQUE` (`slug`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

DROP TABLE IF EXISTS `Usuario`;
CREATE TABLE `Usuario` (
  `id_usuario` bigint unsigned NOT NULL AUTO_INCREMENT,
  `rut` int NOT NULL,
  `password` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `nombre` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `apellido` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `id_establecimiento` bigint DEFAULT NULL,
  `id_biblioteca` bigint DEFAULT NULL,
  `id_rol` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `id_region` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `id_ciudad` int NOT NULL,
  `email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `habilitado` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id_usuario`),
  UNIQUE KEY `rut_UNIQUE` (`rut`),
  UNIQUE KEY `email_UNIQUE` (`email`),
  KEY `id_rol` (`id_rol`),
  KEY `id_region` (`id_region`),
  KEY `id_ciudad` (`id_ciudad`),
  CONSTRAINT `usuario_ibfk_1` FOREIGN KEY (`id_rol`) REFERENCES `Rol` (`id_rol`),
  CONSTRAINT `usuario_ibfk_2` FOREIGN KEY (`id_region`) REFERENCES `Region` (`id_region`),
  CONSTRAINT `usuario_ibfk_3` FOREIGN KEY (`id_ciudad`) REFERENCES `Ciudad` (`id_ciudad`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

INSERT INTO `Asignatura` (`id_asignatura`, `nombre`) VALUES
(1, 'Lenguaje'),
(2, 'Matemáticas'),
(3, 'Biología'),
(4, 'Química'),
(5, 'Física'),
(6, 'Historia'),
(7, 'Música'),
(8, 'Educación Física'),
(9, 'Tecnología'),
(10, 'Inglés'),
(11, 'Orientación'),
(12, 'Artes'),
(13, 'Filosofía'),
(14, 'Ciencia'),
(15, 'Otro');

INSERT INTO `Autor` (`id_autor`, `nombre`, `apellido`, `ano_nacimiento`, `ano_fallecimiento`, `nacionalidad`) VALUES
(1, 'William', 'Shakespeare', 1564, 1616, 'GB'),
(2, 'Agatha', 'Christie', 1890, 1976, 'GB'),
(3, 'Carl', 'Sagan', 1934, 1996, 'US');

INSERT INTO `Biblioteca` (`id_biblioteca`, `id_establecimiento`, `direccion`, `id_region`, `id_ciudad`, `id_encargado`, `nombre_biblioteca`) VALUES
(1, 1, NULL, NULL, NULL, NULL, 'Biblioteca Piloto');

INSERT INTO `Categoria` (`id_categoria`, `nombre`) VALUES
(10, 'Novela'),
(11, 'Ciencia'),
(12, 'Ciencia Ficción'),
(13, 'Fantasía'),
(14, 'Educativo'),
(15, 'Horror'),
(16, 'Suspenso'),
(17, 'Historia'),
(18, 'Filosofía'),
(19, 'Comedia'),
(20, 'Teatro');

INSERT INTO `Ciudad` (`id_ciudad`, `id_region`, `nombre`) VALUES
(1, 'an', 'Antofagasta'),
(2, 'an', 'Calama'),
(3, 'an', 'Tocopilla'),
(4, 'an', 'Mejillones'),
(5, 'an', 'Taltal'),
(6, 'an', 'San Pedro de Atacama'),
(7, 'ap', 'Arica'),
(8, 'ap', 'Putre'),
(9, 'at', 'Copiapó'),
(10, 'at', 'Vallenar'),
(11, 'at', 'Caldera'),
(12, 'at', 'Chañaral'),
(13, 'at', 'Tierra Amarilla'),
(14, 'at', 'Diego de Almagro'),
(15, 'at', 'Huasco'),
(16, 'at', 'El Salvador'),
(17, 'ai', 'Coyhaique'),
(18, 'ai', 'Puerto Aysen'),
(19, 'ai', 'Chile Chico'),
(20, 'ai', 'Cochrane'),
(21, 'bi', 'Concepción'),
(22, 'bi', 'Talcahuano'),
(23, 'bi', 'Los Ángeles'),
(24, 'bi', 'San Pedro de la Paz'),
(25, 'bi', 'Coronel'),
(26, 'bi', 'Hualpén'),
(27, 'bi', 'Chiguayante'),
(28, 'bi', 'Penco'),
(29, 'bi', 'Lota'),
(30, 'bi', 'Tomé'),
(31, 'bi', 'Curanilahue'),
(32, 'bi', 'Mulchén'),
(33, 'bi', 'Nacimiento'),
(34, 'bi', 'Lebu'),
(35, 'bi', 'Hualqui'),
(36, 'bi', 'Cañete'),
(37, 'bi', 'Arauco'),
(38, 'bi', 'La Laja'),
(39, 'bi', 'Los Álamos'),
(40, 'bi', 'Cabrero'),
(41, 'bi', 'Yumbel'),
(42, 'bi', 'Santa Juana'),
(43, 'bi', 'Santa Bárbara'),
(44, 'bi', 'Huelpín'),
(45, 'bi', 'La Araquete'),
(46, 'co', 'La Serena'),
(48, 'co', 'Ovalle'),
(49, 'co', 'Illapel'),
(50, 'co', 'Vicuña'),
(51, 'co', 'Los Vilos'),
(52, 'co', 'Salamanca'),
(53, 'co', 'Andacollo'),
(54, 'co', 'Monte Patria'),
(55, 'co', 'El Palqui'),
(56, 'co', 'Combarbalá'),
(57, 'co', 'Punitaqui'),
(58, 'co', 'Tongoy'),
(59, 'ar', 'Temuco'),
(60, 'ar', 'Angol'),
(61, 'ar', 'Padre las Casas'),
(62, 'ar', 'Villarrica'),
(63, 'ar', 'Victoria'),
(64, 'ar', 'Lautaro'),
(65, 'ar', 'Labranza'),
(66, 'ar', 'Nueva Imperial'),
(67, 'ar', 'Pucón'),
(68, 'ar', 'Pitrufquén'),
(69, 'ar', 'Collipulli'),
(70, 'ar', 'Loncoche'),
(71, 'ar', 'Traiguén'),
(72, 'ar', 'Curacautín'),
(73, 'ar', 'Carahue'),
(74, 'ar', 'Gorbea'),
(75, 'ar', 'Purén'),
(76, 'ar', 'Cunco'),
(77, 'ar', 'Renaico'),
(78, 'ar', 'Vilcún'),
(79, 'ar', 'Freire'),
(80, 'li', 'Rancagua'),
(81, 'li', 'San Fernando'),
(82, 'li', 'Machalí'),
(83, 'li', 'Rengo'),
(84, 'li', 'Graneros'),
(85, 'li', 'Santa Cruz'),
(86, 'li', 'San Vicente de Tagua Tagua'),
(87, 'li', 'Chimbarongo'),
(88, 'li', 'Pichilemu'),
(89, 'li', 'San Francisco de Mostazal'),
(90, 'li', 'Requinóa'),
(91, 'li', 'Doñihue'),
(92, 'li', 'Nancagua'),
(93, 'li', 'Peumo'),
(94, 'li', 'Las Cabras'),
(96, 'li', 'Quinta de Tilcoco'),
(97, 'li', 'La Punta'),
(98, 'li', 'Codegua'),
(99, 'li', 'Chépica'),
(100, 'li', 'Pichidegua'),
(101, 'li', 'Coltauco'),
(102, 'li', 'Gultro'),
(103, 'li', 'Perailillo'),
(104, 'll', 'Puerto Montt'),
(105, 'll', 'Osorno'),
(106, 'll', 'Alerce'),
(107, 'll', 'Castro'),
(108, 'll', 'Ancud'),
(109, 'll', 'Puerto Varas'),
(110, 'll', 'Quellón'),
(111, 'll', 'Calbuco'),
(112, 'll', 'Llanquihue'),
(113, 'll', 'Frutillar'),
(114, 'll', 'Purranque'),
(115, 'll', 'Los Muermos'),
(116, 'll', 'Fresia'),
(117, 'll', 'Dalcahue'),
(118, 'll', 'Río Negro'),
(119, 'll', 'Chonchi'),
(120, 'll', 'Chaitén'),
(121, 'lr', 'Valdivia'),
(122, 'lr', 'La Unión'),
(123, 'lr', 'Río Bueno'),
(124, 'lr', 'Paillaco'),
(125, 'lr', 'Panguipulli'),
(126, 'lr', 'San José de la Mariquina'),
(127, 'lr', 'Los Lagos'),
(128, 'lr', 'Lanco'),
(129, 'lr', 'Futrono'),
(130, 'ma', 'Punta Arenas'),
(131, 'ma', 'Puerto Natales'),
(132, 'ma', 'Porvenir'),
(133, 'ma', 'Puerto Williams'),
(134, 'ml', 'Talca'),
(135, 'ml', 'Curicó'),
(136, 'ml', 'Linares'),
(137, 'ml', 'Cauquenes'),
(138, 'ml', 'Molina'),
(139, 'ml', 'Constitución'),
(140, 'ml', 'Parral'),
(141, 'ml', 'Culenar'),
(142, 'ml', 'San Javier'),
(143, 'ml', 'San Clemente'),
(144, 'ml', 'Teno'),
(145, 'ml', 'Villa Alegre'),
(146, 'ml', 'Longaví'),
(147, 'ml', 'Maule'),
(148, 'ml', 'Colbún'),
(149, 'ml', 'Romeral'),
(150, 'ml', 'Hualañé'),
(151, 'ml', 'Rauco'),
(152, 'ml', 'Retiro'),
(153, 'rm', 'Puente Alto'),
(154, 'rm', 'Maipú'),
(155, 'rm', 'Santiago'),
(156, 'rm', 'San Bernardo'),
(157, 'rm', 'Las Condes'),
(158, 'rm', 'Peñalolén'),
(159, 'rm', 'Quilicura'),
(160, 'rm', 'Ñuñoa'),
(161, 'rm', 'Pudahuel'),
(162, 'rm', 'La Pintana'),
(163, 'rm', 'El Bosque'),
(164, 'rm', 'Recoleta'),
(165, 'rm', 'Renca'),
(166, 'rm', 'Providencia'),
(167, 'rm', 'Estación Central'),
(168, 'rm', 'Cerro Navia'),
(169, 'rm', 'Conchalí'),
(170, 'rm', 'La Granja'),
(171, 'rm', 'Macul'),
(172, 'rm', 'Quinta Normal'),
(173, 'rm', 'San Miguel'),
(174, 'rm', 'Lo Barnechea'),
(175, 'rm', 'Pedro Aguirre Cerda'),
(176, 'rm', 'Independencia'),
(177, 'rm', 'Lo Espejo'),
(178, 'rm', 'Huechuraba'),
(179, 'rm', 'Lo Prado'),
(180, 'rm', 'San Joaquín'),
(181, 'rm', 'La Reina'),
(182, 'rm', 'La Cisterna'),
(183, 'rm', 'Colina'),
(184, 'rm', 'Vitacura'),
(185, 'rm', 'Peñaflor'),
(186, 'rm', 'San Ramón'),
(187, 'rm', 'Cerrillo'),
(188, 'rm', 'Melipilla'),
(190, 'rm', 'Talagante'),
(191, 'rm', 'Lampa'),
(192, 'rm', 'Paine'),
(193, 'rm', 'El Monte'),
(194, 'rm', 'Curacaví'),
(195, 'rm', 'Valle Grande'),
(196, 'rm', 'Batuco'),
(197, 'rm', 'Isla de Maipo'),
(198, 'rm', 'Ciudad de los Valles'),
(199, 'rm', 'La Islita'),
(201, 'rm', 'El Principal'),
(202, 'rm', 'Calera de Tango'),
(203, 'rm', 'Chamisero'),
(204, 'rm', 'Alto Jahuel'),
(205, 'rm', 'San José de Maipo'),
(206, 'rm', 'Tiltil'),
(207, 'rm', 'Bollenar'),
(208, 'nb', 'Chillán'),
(209, 'nb', 'San Carlos'),
(210, 'nb', 'Chillán Viejo'),
(211, 'nb', 'Bulnes'),
(212, 'nb', 'Yungay'),
(213, 'nb', 'Coelemu'),
(214, 'nb', 'Quillón'),
(215, 'nb', 'Quirihue'),
(216, 'nb', 'Coihueco'),
(217, 'ta', 'Iquique'),
(218, 'ta', 'Alto Hospicio'),
(219, 'ta', 'Pozo Almonte'),
(220, 'va', 'Viña del Mar'),
(221, 'va', 'Valparaíso'),
(222, 'va', 'Quilpué'),
(223, 'va', 'Villa Alemana'),
(224, 'va', 'San Antonio'),
(225, 'va', 'Quillota'),
(226, 'va', 'San Felipe'),
(227, 'va', 'Los Andes'),
(228, 'va', 'La Calera'),
(229, 'va', 'Concón'),
(230, 'va', 'Placilla de Peñuelas'),
(231, 'va', 'Limache'),
(232, 'va', 'Quintero'),
(233, 'va', 'Cartagena'),
(234, 'va', 'La Cruz'),
(235, 'va', 'La Ligua'),
(236, 'va', 'Casablanca'),
(237, 'va', 'Llaillay'),
(238, 'va', 'El Quisco'),
(239, 'va', 'Olmué'),
(240, 'va', 'Cabildo'),
(241, 'va', 'San Esteban'),
(242, 'va', 'Nogales'),
(243, 'va', 'Calle Larga'),
(244, 'va', 'Hijuelas'),
(245, 'va', 'Algarrobo'),
(247, 'va', 'Puchuncaví'),
(248, 'va', 'Rinconada'),
(249, 'va', 'Catemu'),
(250, 'va', 'Santa María'),
(251, 'va', 'Hanga roa'),
(252, 'va', 'El Tabo'),
(253, 'va', 'Putaendo'),
(254, 'va', 'Santo Domingo'),
(255, 'va', 'Las Cruces');

INSERT INTO `Establecimiento` (`id_establecimiento`, `nombre`, `direccion`, `id_region`, `id_encargado`, `id_ciudad`, `tipo_establecimiento`) VALUES
(1, 'Escuela Lorenzo Varoli Gherardi', '5 Sur, 18 Y 19 Oriente', 'ml', NULL, 134, 'publico');

INSERT INTO `Inventario` (`id_inventario`, `id_biblioteca`, `id_material`, `stock`, `habilitado`, `id_tags`, `estado`) VALUES
(1, 1, 1, 2, 1, '1', 'daño'),
(2, 1, 2, 3, 1, '2,3', 'disponible'),
(3, 1, 3, 1, 1, '4,5', 'disponible');

INSERT INTO `Material_Educativo` (`id_material`, `sku`, `nombre`, `id_autor`, `id_categoria`, `tipo_material`, `habilitado`, `ano_publicacion`, `edicion`, `id_asignatura`) VALUES
(1, 'NOV0001', 'La Tempestad', 1, 10, 'fisico', 1, 1611, '10', 1),
(2, 'NOV0002', 'Asesinato en el Orient Express', 2, 16, 'fisico', 1, 1934, '9', 15),
(3, 'CIE0001', 'Cosmos', 3, 11, 'fisico', 1, 1980, '3', 14);

INSERT INTO `Movimiento` (`id_movimiento`, `id_material`, `id_inventario`, `id_biblioteca`, `id_usuario_prestamo`, `id_usuario_gestion`, `fecha_salida`, `fecha_retorno`, `estado`) VALUES
(1, 3, 3, 1, 4, 2, '2022-10-07 14:23:32', '2022-10-07 14:23:32', 'devuelto'),
(2, 2, 2, 1, 3, 2, '2022-10-07 14:22:10', NULL, 'prestamo'),
(3, 1, 1, 1, 3, 2, '2022-10-07 14:23:14', NULL, 'prestamo');

INSERT INTO `Pais` (`id_pais`, `iso`, `nombre`) VALUES
(1, 'AF', 'Afganistán'),
(2, 'AX', 'Islas Gland'),
(3, 'AL', 'Albania'),
(4, 'DE', 'Alemania'),
(5, 'AD', 'Andorra'),
(6, 'AO', 'Angola'),
(7, 'AI', 'Anguilla'),
(8, 'AQ', 'Antártida'),
(9, 'AG', 'Antigua y Barbuda'),
(10, 'AN', 'Antillas Holandesas'),
(11, 'SA', 'Arabia Saudí'),
(12, 'DZ', 'Argelia'),
(13, 'AR', 'Argentina'),
(14, 'AM', 'Armenia'),
(15, 'AW', 'Aruba'),
(16, 'AU', 'Australia'),
(17, 'AT', 'Austria'),
(18, 'AZ', 'Azerbaiyán'),
(19, 'BS', 'Bahamas'),
(20, 'BH', 'Bahréin'),
(21, 'BD', 'Bangladesh'),
(22, 'BB', 'Barbados'),
(23, 'BY', 'Bielorrusia'),
(24, 'BE', 'Bélgica'),
(25, 'BZ', 'Belice'),
(26, 'BJ', 'Benin'),
(27, 'BM', 'Bermudas'),
(28, 'BT', 'Bhután'),
(29, 'BO', 'Bolivia'),
(30, 'BA', 'Bosnia y Herzegovina'),
(31, 'BW', 'Botsuana'),
(32, 'BV', 'Isla Bouvet'),
(33, 'BR', 'Brasil'),
(34, 'BN', 'Brunéi'),
(35, 'BG', 'Bulgaria'),
(36, 'BF', 'Burkina Faso'),
(37, 'BI', 'Burundi'),
(38, 'CV', 'Cabo Verde'),
(39, 'KY', 'Islas Caimán'),
(40, 'KH', 'Camboya'),
(41, 'CM', 'Camerún'),
(42, 'CA', 'Canadá'),
(43, 'CF', 'República Centroafricana'),
(44, 'TD', 'Chad'),
(45, 'CZ', 'República Checa'),
(46, 'CL', 'Chile'),
(47, 'CN', 'China'),
(48, 'CY', 'Chipre'),
(49, 'CX', 'Isla de Navidad'),
(50, 'VA', 'Ciudad del Vaticano'),
(51, 'CC', 'Islas Cocos'),
(52, 'CO', 'Colombia'),
(53, 'KM', 'Comoras'),
(54, 'CD', 'República Democrática del Congo'),
(55, 'CG', 'Congo'),
(56, 'CK', 'Islas Cook'),
(57, 'KP', 'Corea del Norte'),
(58, 'KR', 'Corea del Sur'),
(59, 'CI', 'Costa de Marfil'),
(60, 'CR', 'Costa Rica'),
(61, 'HR', 'Croacia'),
(62, 'CU', 'Cuba'),
(63, 'DK', 'Dinamarca'),
(64, 'DM', 'Dominica'),
(65, 'DO', 'República Dominicana'),
(66, 'EC', 'Ecuador'),
(67, 'EG', 'Egipto'),
(68, 'SV', 'El Salvador'),
(69, 'AE', 'Emiratos Árabes Unidos'),
(70, 'ER', 'Eritrea'),
(71, 'SK', 'Eslovaquia'),
(72, 'SI', 'Eslovenia'),
(73, 'ES', 'España'),
(74, 'UM', 'Islas ultramarinas de Estados Unidos'),
(75, 'US', 'Estados Unidos'),
(76, 'EE', 'Estonia'),
(77, 'ET', 'Etiopía'),
(78, 'FO', 'Islas Feroe'),
(79, 'PH', 'Filipinas'),
(80, 'FI', 'Finlandia'),
(81, 'FJ', 'Fiyi'),
(82, 'FR', 'Francia'),
(83, 'GA', 'Gabón'),
(84, 'GM', 'Gambia'),
(85, 'GE', 'Georgia'),
(86, 'GS', 'Islas Georgias del Sur y Sandwich del Sur'),
(87, 'GH', 'Ghana'),
(88, 'GI', 'Gibraltar'),
(89, 'GD', 'Granada'),
(90, 'GR', 'Grecia'),
(91, 'GL', 'Groenlandia'),
(92, 'GP', 'Guadalupe'),
(93, 'GU', 'Guam'),
(94, 'GT', 'Guatemala'),
(95, 'GF', 'Guayana Francesa'),
(96, 'GN', 'Guinea'),
(97, 'GQ', 'Guinea Ecuatorial'),
(98, 'GW', 'Guinea-Bissau'),
(99, 'GY', 'Guyana'),
(100, 'HT', 'Haití'),
(101, 'HM', 'Islas Heard y McDonald'),
(102, 'HN', 'Honduras'),
(103, 'HK', 'Hong Kong'),
(104, 'HU', 'Hungría'),
(105, 'IN', 'India'),
(106, 'ID', 'Indonesia'),
(107, 'IR', 'Irán'),
(108, 'IQ', 'Iraq'),
(109, 'IE', 'Irlanda'),
(110, 'IS', 'Islandia'),
(111, 'IL', 'Israel'),
(112, 'IT', 'Italia'),
(113, 'JM', 'Jamaica'),
(114, 'JP', 'Japón'),
(115, 'JO', 'Jordania'),
(116, 'KZ', 'Kazajstán'),
(117, 'KE', 'Kenia'),
(118, 'KG', 'Kirguistán'),
(119, 'KI', 'Kiribati'),
(120, 'KW', 'Kuwait'),
(121, 'LA', 'Laos'),
(122, 'LS', 'Lesotho'),
(123, 'LV', 'Letonia'),
(124, 'LB', 'Líbano'),
(125, 'LR', 'Liberia'),
(126, 'LY', 'Libia'),
(127, 'LI', 'Liechtenstein'),
(128, 'LT', 'Lituania'),
(129, 'LU', 'Luxemburgo'),
(130, 'MO', 'Macao'),
(131, 'MK', 'ARY Macedonia'),
(132, 'MG', 'Madagascar'),
(133, 'MY', 'Malasia'),
(134, 'MW', 'Malawi'),
(135, 'MV', 'Maldivas'),
(136, 'ML', 'Malí'),
(137, 'MT', 'Malta'),
(138, 'FK', 'Islas Malvinas'),
(139, 'MP', 'Islas Marianas del Norte'),
(140, 'MA', 'Marruecos'),
(141, 'MH', 'Islas Marshall'),
(142, 'MQ', 'Martinica'),
(143, 'MU', 'Mauricio'),
(144, 'MR', 'Mauritania'),
(145, 'YT', 'Mayotte'),
(146, 'MX', 'México'),
(147, 'FM', 'Micronesia'),
(148, 'MD', 'Moldavia'),
(149, 'MC', 'Mónaco'),
(150, 'MN', 'Mongolia'),
(151, 'MS', 'Montserrat'),
(152, 'MZ', 'Mozambique'),
(153, 'MM', 'Myanmar'),
(154, 'NA', 'Namibia'),
(155, 'NR', 'Nauru'),
(156, 'NP', 'Nepal'),
(157, 'NI', 'Nicaragua'),
(158, 'NE', 'Níger'),
(159, 'NG', 'Nigeria'),
(160, 'NU', 'Niue'),
(161, 'NF', 'Isla Norfolk'),
(162, 'NO', 'Noruega'),
(163, 'NC', 'Nueva Caledonia'),
(164, 'NZ', 'Nueva Zelanda'),
(165, 'OM', 'Omán'),
(166, 'NL', 'Países Bajos'),
(167, 'PK', 'Pakistán'),
(168, 'PW', 'Palau'),
(169, 'PS', 'Palestina'),
(170, 'PA', 'Panamá'),
(171, 'PG', 'Papúa Nueva Guinea'),
(172, 'PY', 'Paraguay'),
(173, 'PE', 'Perú'),
(174, 'PN', 'Islas Pitcairn'),
(175, 'PF', 'Polinesia Francesa'),
(176, 'PL', 'Polonia'),
(177, 'PT', 'Portugal'),
(178, 'PR', 'Puerto Rico'),
(179, 'QA', 'Qatar'),
(180, 'GB', 'Reino Unido'),
(181, 'RE', 'Reunión'),
(182, 'RW', 'Ruanda'),
(183, 'RO', 'Rumania'),
(184, 'RU', 'Rusia'),
(185, 'EH', 'Sahara Occidental'),
(186, 'SB', 'Islas Salomón'),
(187, 'WS', 'Samoa'),
(188, 'AS', 'Samoa Americana'),
(189, 'KN', 'San Cristóbal y Nevis'),
(190, 'SM', 'San Marino'),
(191, 'PM', 'San Pedro y Miquelón'),
(192, 'VC', 'San Vicente y las Granadinas'),
(193, 'SH', 'Santa Helena'),
(194, 'LC', 'Santa Lucía'),
(195, 'ST', 'Santo Tomé y Príncipe'),
(196, 'SN', 'Senegal'),
(197, 'CS', 'Serbia y Montenegro'),
(198, 'SC', 'Seychelles'),
(199, 'SL', 'Sierra Leona'),
(200, 'SG', 'Singapur'),
(201, 'SY', 'Siria'),
(202, 'SO', 'Somalia'),
(203, 'LK', 'Sri Lanka'),
(204, 'SZ', 'Suazilandia'),
(205, 'ZA', 'Sudáfrica'),
(206, 'SD', 'Sudán'),
(207, 'SE', 'Suecia'),
(208, 'CH', 'Suiza'),
(209, 'SR', 'Surinam'),
(210, 'SJ', 'Svalbard y Jan Mayen'),
(211, 'TH', 'Tailandia'),
(212, 'TW', 'Taiwán'),
(213, 'TZ', 'Tanzania'),
(214, 'TJ', 'Tayikistán'),
(215, 'IO', 'Territorio Británico del Océano Índico'),
(216, 'TF', 'Territorios Australes Franceses'),
(217, 'TL', 'Timor Oriental'),
(218, 'TG', 'Togo'),
(219, 'TK', 'Tokelau'),
(220, 'TO', 'Tonga'),
(221, 'TT', 'Trinidad y Tobago'),
(222, 'TN', 'Túnez'),
(223, 'TC', 'Islas Turcas y Caicos'),
(224, 'TM', 'Turkmenistán'),
(225, 'TR', 'Turquía'),
(226, 'TV', 'Tuvalu'),
(227, 'UA', 'Ucrania'),
(228, 'UG', 'Uganda'),
(229, 'UY', 'Uruguay'),
(230, 'UZ', 'Uzbekistán'),
(231, 'VU', 'Vanuatu'),
(232, 'VE', 'Venezuela'),
(233, 'VN', 'Vietnam'),
(234, 'VG', 'Islas Vírgenes Británicas'),
(235, 'VI', 'Islas Vírgenes de los Estados Unidos'),
(236, 'WF', 'Wallis y Futuna'),
(237, 'YE', 'Yemen'),
(238, 'DJ', 'Yibuti'),
(239, 'ZM', 'Zambia'),
(240, 'ZW', 'Zimbabue');

INSERT INTO `Region` (`id_region`, `nombre`) VALUES
('ai', 'Aysén'),
('an', 'Antofagasta'),
('ap', 'Arica y Parinacota'),
('ar', 'La Araucanía'),
('at', 'Atacama'),
('bi', 'Biobío'),
('co', 'Coquimbo'),
('li', 'Libertador General Bernardo O\'Higgins'),
('ll', 'Los Lagos'),
('lr', 'Los Ríos'),
('ma', 'Magallanes'),
('ml', 'Maule'),
('nb', 'Ñuble'),
('rm', 'Metropolitana de Santiago'),
('ta', 'Tarapacá'),
('va', 'Valparaiso');

INSERT INTO `Rol` (`id_rol`, `nombre`, `capacidades`) VALUES
('admin', 'Administrador', '10,20,30,40'),
('alumno', 'Alumno', '40'),
('docente', 'Docente', '30,40'),
('encargado', 'Encargado', '20,30,40');

INSERT INTO `Tag` (`id_tag`, `slug`, `nombre`) VALUES
(1, 'lectura-complementaria', 'Lectura Complementaria'),
(2, 'no-escolar', 'No Escolar'),
(3, 'ocio', 'Ocio'),
(4, 'cultura', 'Cultura'),
(5, 'cientifico', 'Científico');

INSERT INTO `Usuario` (`id_usuario`, `rut`, `password`, `nombre`, `apellido`, `id_establecimiento`, `id_biblioteca`, `id_rol`, `id_region`, `id_ciudad`, `email`, `habilitado`) VALUES
(1, 11222333, 'password-hash', 'Super', 'Admin', NULL, NULL, 'admin', 'ml', 134, 'estebancuevas@gmail.com', 1),
(2, 12888444, 'password-hash', 'Carlos', 'Perez', 1, 1, 'encargado', 'ml', 134, 'encargado@colegio.cl', 1),
(3, 18222777, 'password-hash', 'María', 'Saavedra', 1, 1, 'docente', 'ml', 134, 'docente@colegio.cl', 1),
(4, 22000555, 'password-hash', 'Sofía', 'Ramírez', 1, 1, 'alumno', 'ml', 134, 'alumno@colegio.cl', 1);

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
